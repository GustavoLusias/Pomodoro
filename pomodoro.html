<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pomodoro Gamer</title>
    <style>
      :root {
        --primary-color: #00ffff;
        --secondary-color: #ff00ff;
        --accent-color: #00ff00;
        --background-color: #0a0a1a;
        --card-bg: rgba(20, 20, 40, 0.8);
        --text-color: #ffffff;
        --glow: 0 0 10px;
        --transition-speed: 0.5s;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        transition: all var(--transition-speed) ease;
      }

      body {
        background-color: var(--background-color);
        color: var(--text-color);
        min-height: 100vh;
        overflow-x: hidden;
        background-image: radial-gradient(
            circle at 10% 20%,
            rgba(0, 255, 255, 0.05) 0%,
            transparent 20%
          ),
          radial-gradient(
            circle at 90% 80%,
            rgba(255, 0, 255, 0.05) 0%,
            transparent 20%
          );
      }

      .container {
        display: grid;
        grid-template-columns: 1fr 300px;
        grid-template-rows: auto 1fr auto;
        grid-template-areas:
          "header header"
          "timer tasks"
          "footer footer";
        gap: 20px;
        padding: 20px;
        max-width: 1200px;
        margin: 0 auto;
        min-height: 100vh;
      }

      header {
        grid-area: header;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 20px;
        border-bottom: 2px solid var(--primary-color);
        box-shadow: var(--glow) var(--primary-color);
        border-radius: 10px;
      }

      .logo {
        font-size: 1.8rem;
        font-weight: bold;
        text-shadow: var(--glow) var(--primary-color);
        color: var(--primary-color);
      }

      .coins-display {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 1.2rem;
        background: var(--card-bg);
        padding: 8px 15px;
        border-radius: 20px;
        box-shadow: var(--glow) var(--accent-color);
      }

      .coins-display i {
        color: gold;
      }

      .shop-icon {
        font-size: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        padding: 8px;
        border-radius: 50%;
        background: var(--card-bg);
      }

      .shop-icon:hover {
        transform: scale(1.1);
        box-shadow: var(--glow) var(--secondary-color);
      }

      .timer-section {
        grid-area: timer;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 30px;
        background: var(--card-bg);
        border-radius: 20px;
        box-shadow: var(--glow) var(--primary-color);
      }

      .timer-display {
        font-size: 6rem;
        font-weight: bold;
        margin: 20px 0;
        text-shadow: var(--glow) var(--primary-color);
        color: var(--primary-color);
        letter-spacing: 5px;
      }

      .timer-controls {
        display: flex;
        gap: 15px;
        margin-bottom: 30px;
      }

      .timer-btn {
        padding: 12px 25px;
        border: none;
        border-radius: 10px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        background: var(--card-bg);
        color: var(--text-color);
        box-shadow: var(--glow) var(--primary-color);
      }

      .timer-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px var(--primary-color);
      }

      .timer-btn.start {
        background: linear-gradient(
          45deg,
          var(--primary-color),
          var(--accent-color)
        );
        color: var(--background-color);
      }

      .timer-btn.pause {
        background: linear-gradient(45deg, var(--secondary-color), #ff6600);
      }

      .timer-btn.reset {
        background: linear-gradient(45deg, #ff3366, var(--secondary-color));
      }

      .timer-settings {
        display: flex;
        gap: 30px;
        margin-top: 20px;
      }

      .setting {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }

      .setting label {
        font-size: 1rem;
        text-shadow: var(--glow) var(--accent-color);
      }

      .setting input {
        width: 80px;
        padding: 8px;
        border: none;
        border-radius: 5px;
        background: var(--card-bg);
        color: var(--text-color);
        text-align: center;
        box-shadow: var(--glow) var(--accent-color);
      }

      .tasks-section {
        grid-area: tasks;
        background: var(--card-bg);
        border-radius: 20px;
        padding: 20px;
        box-shadow: var(--glow) var(--secondary-color);
        display: flex;
        flex-direction: column;
      }

      .tasks-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--secondary-color);
      }

      .tasks-title {
        font-size: 1.5rem;
        text-shadow: var(--glow) var(--secondary-color);
      }

      .add-task-form {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }

      .task-input {
        flex: 1;
        padding: 10px;
        border: none;
        border-radius: 5px;
        background: var(--card-bg);
        color: var(--text-color);
        box-shadow: var(--glow) var(--accent-color);
      }

      .add-task-btn {
        padding: 10px 15px;
        border: none;
        border-radius: 5px;
        background: var(--accent-color);
        color: var(--background-color);
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .add-task-btn:hover {
        transform: scale(1.05);
        box-shadow: var(--glow) var(--accent-color);
      }

      .tasks-list {
        flex: 1;
        overflow-y: auto;
        max-height: 400px;
      }

      .task-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px;
        margin-bottom: 10px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .task-item:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: translateX(5px);
      }

      .task-checkbox {
        width: 20px;
        height: 20px;
        cursor: pointer;
      }

      .task-text {
        flex: 1;
        font-size: 1rem;
      }

      .task-text.completed {
        text-decoration: line-through;
        opacity: 0.7;
      }

      .delete-task {
        background: none;
        border: none;
        color: #ff3366;
        cursor: pointer;
        font-size: 1.2rem;
        transition: all 0.3s ease;
      }

      .delete-task:hover {
        transform: scale(1.2);
      }

      footer {
        grid-area: footer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        border-top: 2px solid var(--accent-color);
        box-shadow: var(--glow) var(--accent-color);
        border-radius: 10px;
      }

      .music-control {
        display: flex;
        align-items: center;
        gap: 10px;
        background: var(--card-bg);
        padding: 8px 15px;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: var(--glow) var(--primary-color);
      }

      .music-control:hover {
        transform: scale(1.05);
      }

      .music-control i {
        font-size: 1.2rem;
      }

      .shop-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 1000;
        justify-content: center;
        align-items: center;
      }

      .shop-content {
        background: var(--card-bg);
        border-radius: 20px;
        padding: 30px;
        width: 90%;
        max-width: 800px;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 0 30px var(--primary-color);
        position: relative;
      }

      .close-shop {
        position: absolute;
        top: 15px;
        right: 15px;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--text-color);
        transition: all 0.3s ease;
      }

      .close-shop:hover {
        color: #ff3366;
        transform: scale(1.2);
      }

      .shop-title {
        text-align: center;
        margin-bottom: 20px;
        font-size: 2rem;
        text-shadow: var(--glow) var(--secondary-color);
      }

      .themes-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .theme-card {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        padding: 20px;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
        border: 2px solid transparent;
      }

      .theme-card:hover {
        transform: translateY(-5px);
        border-color: var(--primary-color);
        box-shadow: var(--glow) var(--primary-color);
      }

      .theme-card.selected {
        border-color: var(--accent-color);
        box-shadow: var(--glow) var(--accent-color);
      }

      .theme-preview {
        width: 100%;
        height: 100px;
        border-radius: 10px;
        margin-bottom: 15px;
        transition: all 0.5s ease;
      }

      .theme-name {
        font-size: 1.2rem;
        margin-bottom: 10px;
      }

      .theme-price {
        font-size: 1.1rem;
        color: gold;
        margin-bottom: 15px;
      }

      .buy-theme-btn {
        padding: 8px 15px;
        border: none;
        border-radius: 5px;
        background: var(--accent-color);
        color: var(--background-color);
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .buy-theme-btn:hover:not(:disabled) {
        transform: scale(1.05);
        box-shadow: var(--glow) var(--accent-color);
      }

      .buy-theme-btn:disabled {
        background: #666;
        cursor: not-allowed;
      }

      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.1); }
        100% { transform: scale(1); }
      }

      .pulse {
        animation: pulse 0.5s;
      }

      /* THEMES */
      .theme-neon { --primary-color: #00ffff; --secondary-color: #ff00ff; --accent-color: #00ff00; --background-color: #0a0a1a; }
      .theme-cyber { --primary-color: #ff0099; --secondary-color: #00ccff; --accent-color: #ffcc00; --background-color: #001122; }
      .theme-matrix { --primary-color: #00ff00; --secondary-color: #00aa00; --accent-color: #00ff88; --background-color: #000000; }
      .theme-purple { --primary-color: #aa00ff; --secondary-color: #ff00aa; --accent-color: #ffaa00; --background-color: #110022; }
      .theme-ocean { --primary-color: #00aaff; --secondary-color: #00ffcc; --accent-color: #ffaa00; --background-color: #001133; }

    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body class="theme-neon">
    <div class="container">
      <header>
        <div class="logo">POMODORO GAMER</div>
        <div class="coins-display">
          <i class="fas fa-coins"></i>
          <span id="coins-count">0</span>
        </div>
        <div class="shop-icon" id="shop-btn">
          <i class="fas fa-store"></i>
        </div>
      </header>

      <section class="timer-section">
        <div class="timer-display" id="timer">25:00</div>
        <div class="timer-controls">
          <button class="timer-btn start" id="start-btn">Iniciar</button>
          <button class="timer-btn pause" id="pause-btn">Pausar</button>
          <button class="timer-btn reset" id="reset-btn">Resetar</button>
        </div>
        <div class="timer-settings">
          <div class="setting">
            <label for="study-time">Tempo de estudo (min)</label>
            <input type="number" id="study-time" min="1" max="60" value="25" />
          </div>
          <div class="setting">
            <label for="break-time">Tempo de pausa (min)</label>
            <input type="number" id="break-time" min="1" max="30" value="5" />
          </div>
        </div>
      </section>

      <section class="tasks-section">
        <div class="tasks-header">
          <h2 class="tasks-title">Tarefas</h2>
        </div>
        <div class="add-task-form">
          <input
            type="text"
            class="task-input"
            id="task-input"
            placeholder="Nova tarefa..."
          />
          <button class="add-task-btn" id="add-task-btn">Adicionar</button>
        </div>
        <div class="tasks-list" id="tasks-list"></div>
      </section>

      <footer>
        <div class="music-control" id="music-control">
          <i class="fas fa-music"></i>
          <span>Lofi: OFF</span>
        </div>
        <div class="session-info">
          Sessões completadas: <span id="sessions-count">0</span>
        </div>
      </footer>
    </div>

    <div class="shop-modal" id="shop-modal">
      <div class="shop-content">
        <span class="close-shop" id="close-shop">&times;</span>
        <h2 class="shop-title">Loja de Temas</h2>
        <div class="coins-display">
          <i class="fas fa-coins"></i>
          <span id="shop-coins-count">0</span>
        </div>
        <div class="themes-grid" id="themes-grid"></div>
      </div>
    </div>

    <script>
     
      const state = {
        minutes: 25,
        seconds: 0,
        isRunning: false,
        mode: "pomodoro",
        sessionsCompleted: 0,
        coins: parseInt(localStorage.getItem("pomodoroCoins")) || 0,
        purchasedThemes: JSON.parse(localStorage.getItem("purchasedThemes")) || [],
        selectedTheme: localStorage.getItem("selectedTheme") || "theme-neon",
        tasks: JSON.parse(localStorage.getItem("tasks")) || [],
      };

      
      const timerDisplay = document.getElementById("timer");
      const startBtn = document.getElementById("start-btn");
      const pauseBtn = document.getElementById("pause-btn");
      const resetBtn = document.getElementById("reset-btn");
      const studyTimeInput = document.getElementById("study-time");
      const breakTimeInput = document.getElementById("break-time");
      const coinsCount = document.getElementById("coins-count");
      const sessionsCount = document.getElementById("sessions-count");
      const shopBtn = document.getElementById("shop-btn");
      const shopModal = document.getElementById("shop-modal");
      const closeShopBtn = document.getElementById("close-shop");
      const themesGrid = document.getElementById("themes-grid");
      const shopCoinsCount = document.getElementById("shop-coins-count");
      const musicControl = document.getElementById("music-control");
      const musicSpan = musicControl.querySelector("span");
      const tasksList = document.getElementById("tasks-list");
      const addTaskBtn = document.getElementById("add-task-btn");
      const taskInput = document.getElementById("task-input");

      let timerInterval;
      const lofiAudio = new Audio(
        "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
      );
      lofiAudio.loop = true;

      const themes = [
        { id: "theme-neon", name: "Neon", price: 0 },
        { id: "theme-cyber", name: "Cyber", price: 20 },
        { id: "theme-matrix", name: "Matrix", price: 30 },
        { id: "theme-purple", name: "Purple", price: 25 },
        { id: "theme-ocean", name: "Ocean", price: 40 },
      ];

      
      function saveState() {
        localStorage.setItem("pomodoroCoins", state.coins);
        localStorage.setItem("purchasedThemes", JSON.stringify(state.purchasedThemes));
        localStorage.setItem("selectedTheme", state.selectedTheme);
        localStorage.setItem("tasks", JSON.stringify(state.tasks));
      }

      function updateTimerDisplay() {
        timerDisplay.textContent =
          String(state.minutes).padStart(2, "0") +
          ":" +
          String(state.seconds).padStart(2, "0");
      }

      function updateCoinsDisplay() {
        coinsCount.textContent = state.coins;
        shopCoinsCount.textContent = state.coins;
      }

      function updateSessionsDisplay() {
        sessionsCount.textContent = state.sessionsCompleted;
      }

      function tick() {
        if (state.seconds === 0) {
          if (state.minutes === 0) {
            completeSession();
          } else {
            state.minutes--;
            state.seconds = 59;
          }
        } else {
          state.seconds--;
        }
        updateTimerDisplay();
      }

      function startTimer() {
        if (!state.isRunning) {
          state.isRunning = true;
          timerInterval = setInterval(tick, 1000);
          playClickSound();
        }
      }

      function pauseTimer() {
        state.isRunning = false;
        clearInterval(timerInterval);
        playClickSound();
      }

      function resetTimer() {
        state.isRunning = false;
        clearInterval(timerInterval);
        state.minutes = parseInt(studyTimeInput.value);
        state.seconds = 0;
        state.mode = "pomodoro";
        updateTimerDisplay();
        playClickSound();
      }

      function completeSession() {
        pauseTimer();
        if (state.mode === "pomodoro") {
          state.sessionsCompleted++;
          state.coins += 5;
          pulseCoins();
          alert("Sessão concluída! Ganhe 5 moedas.");
          state.mode = "break";
          state.minutes = parseInt(breakTimeInput.value);
          state.seconds = 0;
        } else {
          state.mode = "pomodoro";
          state.minutes = parseInt(studyTimeInput.value);
          state.seconds = 0;
        }
        updateTimerDisplay();
        updateCoinsDisplay();
        updateSessionsDisplay();
        saveState();
      }

      function pulseCoins() {
        coinsCount.classList.add("pulse");
        shopCoinsCount.classList.add("pulse");
        setTimeout(() => {
          coinsCount.classList.remove("pulse");
          shopCoinsCount.classList.remove("pulse");
        }, 500);
      }

     
      function renderTasks() {
        tasksList.innerHTML = "";
        state.tasks.forEach((task, index) => {
          const taskItem = document.createElement("div");
          taskItem.className = "task-item";

          const checkbox = document.createElement("input");
          checkbox.type = "checkbox";
          checkbox.checked = task.completed;
          checkbox.className = "task-checkbox";
          checkbox.addEventListener("change", () => {
            state.tasks[index].completed = checkbox.checked;
            saveState();
            renderTasks();
          });

          const text = document.createElement("span");
          text.className = "task-text";
          if (task.completed) text.classList.add("completed");
          text.textContent = task.text;

          const deleteBtn = document.createElement("button");
          deleteBtn.className = "delete-task";
          deleteBtn.innerHTML = "&times;";
          deleteBtn.addEventListener("click", () => {
            state.tasks.splice(index, 1);
            saveState();
            renderTasks();
          });

          taskItem.appendChild(checkbox);
          taskItem.appendChild(text);
          taskItem.appendChild(deleteBtn);
          tasksList.appendChild(taskItem);
        });
      }

      addTaskBtn.addEventListener("click", () => {
        const text = taskInput.value.trim();
        if (text) {
          state.tasks.push({ text, completed: false });
          taskInput.value = "";
          saveState();
          renderTasks();
        }
      });

      renderTasks();

     
      musicControl.addEventListener("click", () => {
        if (lofiAudio.paused) {
          lofiAudio.play();
          musicSpan.textContent = "Lofi: ON";
        } else {
          lofiAudio.pause();
          musicSpan.textContent = "Lofi: OFF";
        }
      });

      function applyTheme(themeId) {
        document.body.className = themeId;
        state.selectedTheme = themeId;
        saveState();
      }

      function buyTheme(theme) {
        if (state.coins >= theme.price) {
          state.coins -= theme.price;
          if (!state.purchasedThemes.includes(theme.id))
            state.purchasedThemes.push(theme.id);
          applyTheme(theme.id);
          updateCoinsDisplay();
          renderThemes();
        } else {
          alert("Moedas insuficientes!");
        }
      }

      function renderThemes() {
        themesGrid.innerHTML = "";
        themes.forEach((theme) => {
          const card = document.createElement("div");
          card.className = "theme-card";
          if (state.selectedTheme === theme.id) card.classList.add("selected");

          const preview = document.createElement("div");
          preview.className = "theme-preview " + theme.id;

          const name = document.createElement("div");
          name.className = "theme-name";
          name.textContent = theme.name;

          const price = document.createElement("div");
          price.className = "theme-price";
          price.textContent = theme.price === 0 ? "Grátis" : theme.price + " moedas";

          const btn = document.createElement("button");
          btn.className = "buy-theme-btn";
          btn.textContent = state.purchasedThemes.includes(theme.id)
            ? "Selecionado"
            : "Comprar";
          btn.disabled = state.purchasedThemes.includes(theme.id);
          btn.addEventListener("click", () => buyTheme(theme));

          card.appendChild(preview);
          card.appendChild(name);
          card.appendChild(price);
          card.appendChild(btn);
          themesGrid.appendChild(card);
        });
      }

      shopBtn.addEventListener("click", () => {
        shopModal.style.display = "flex";
        renderThemes();
      });
      closeShopBtn.addEventListener("click", () => {
        shopModal.style.display = "none";
      });

      // ========== Click Sound ==========
      function playClickSound() {
        const audio = new Audio(
          "https://www.soundjay.com/buttons/sounds/button-16.mp3"
        );
        audio.volume = 0.3;
        audio.play();
      }

      // ========== Eventos Timer ==========
      startBtn.addEventListener("click", startTimer);
      pauseBtn.addEventListener("click", pauseTimer);
      resetBtn.addEventListener("click", resetTimer);

      // ========== Inicialização ==========
      applyTheme(state.selectedTheme);
      updateTimerDisplay();
      updateCoinsDisplay();
      updateSessionsDisplay();
    </script>
  </body>
</html>
